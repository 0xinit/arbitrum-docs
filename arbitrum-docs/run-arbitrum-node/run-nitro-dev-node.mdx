---
title: 'How to run a local Nitro dev node'
description: 'This page provides instructions for setting up and running a local Nitro dev node for contract testing and development.'
author: mahsamoosavi
sme: mahsamoosavi
target_audience: 'Developers deploying smart contracts using Stylus'
content_type: how-to
sidebar_position: 5
---

import PublicPreviewBannerPartial from '../partials/_public-preview-banner-partial.mdx';

<PublicPreviewBannerPartial />

## Overview

This page provides step-by-step instructions for setting up and running a local Nitro node in `--dev` mode. This mode is ideal for developers who want to quickly test contracts using a single node, as it offers a simpler and faster setup compared to more complex environments.

While some teams use `nitro-testnode` for testing cross-layer messaging, which involves launching both Geth as L1 and Nitro as L2, this setup can be more complex and time-consuming. If your primary goal is to test contracts on a local node without needing cross-layer interactions, Nitro's `--dev` mode offers a lightweight and efficient alternative.

However, if you need more advanced functionality—such as cross-layer messaging, working with both L1 and L2 chains, or testing interactions between different layers—`nitro-testnode` is the preferred option. The testnode setup allows you to simulate a full L1-L2 environment, which is critical for those scenarios. See here for instructions.

Note that Nitro `--dev` mode is particularly ideal for Stylus contract testing, as it is much lighter and faster to set up compared to the full nitro-testnode environment.

## Prerequisites

Before beginning, ensure [Docker](https://docs.docker.com/get-docker/) is installed and running on your machine.

## Run the Nitro dev node

Start the Nitro dev node in `--dev` mode using the following command. If the Docker image is not already present, Docker will automatically pull it for you.

```bash
docker run -it --rm --name nitro-dev -p 8547:8547 offchainlabs/nitro-node:v3.2.1-d81324d --dev --http.addr 0.0.0.0local Nitro dev node in `--dev` mode

```

- Replace `offchainlabs/nitro-node:v3.2.1-d81324d` with the latest version of the Nitro image (<code>@latestNitroNodeImage@</code>) to ensure you're using the most up-to-date node.
- The node will listen for JSON-RPC requests on port 8547.
- The `--dev` flag initializes the node in development mode, providing an L2-only environment for testing.
- `--http.addr 0.0.0.0` binds the node to all available interfaces, making it accessible via both IPv4 (127.0.0.1) and IPv6 (::1).

## Verify the node is running

Once the node is up and running, you can verify its status by making a simple RPC request to check the network ID:

```bash
curl -X POST -H "Content-Type: application/json" \
  --data '{
    "jsonrpc":"2.0",
    "method":"net_version",
    "params":[],
    "id":1
  }' http://127.0.0.1:8547
```

You should receive a response like:

```bash
{
  "jsonrpc": "2.0",
  "id": 1,
  "result": "412346"
}
```

This confirms that your node is running and accessible.

## What the `--dev` flag does

The `--dev` flag simplifies the setup by initializing a development environment with a number of preset parameters, creating an L2-only chain without requiring an L1 listener. When you use the `--dev` flag, Nitro automatically applies the following parameters:

In `--dev` mode, a default development account is available, which is pre-funded with ETH in all networks. This account can be used for deploying contracts, interacting with the chain, and assuming chain ownership.

- **Address:** 0x3f1Eae7D46d88F08fc2F8ed27FCb2AB183EB2d0E
- **Private key:** 0xb6b15c8cb491557369f3c7d2c287b053eb229daa9c22138887752191c9520659

## Setting the chain owner with `ArbDebug` precompile

In Nitro `--dev` mode, the default chain owner is set to `0x0000000000000000000000000000000000000000`. However, you can use the [`ArbDebug` precompile](https://github.com/OffchainLabs/nitro-contracts/blob/main/src/precompiles/ArbDebug.sol) to set the chain owner. This precompile includes [the `becomeChainOwner()` function](https://github.com/OffchainLabs/nitro-contracts/blob/fbbcef09c95f69decabaced3da683f987902f3e2/src/precompiles/ArbDebug.sol#L13), which can be called to assume ownership of the chain. Chain ownership is important because it allows the owner to perform certain critical functions within the Arbitrum environment.

To set the chain owner, you can call the `becomeChainOwner()` function with your preffered private key, we'll use the dev account as an example:

```bash
cast send 0x00000000000000000000000000000000000000FF "becomeChainOwner()" --private-key 0xb6b15c8cb491557369f3c7d2c287b053eb229daa9c22138887752191c9520659 --rpc-url http://127.0.0.1:8547
```

- `0x00000000000000000000000000000000000000FF`: This is the address of the ArbDebug precompile on Arbitrum.
- `becomeChainOwner()`: This is the function call that transfers ownership of the chain to the caller.
- `--private-key`: Use the private key of the account that should become the chain owner.
- `--rpc-url http://127.0.0.1:8547`: Ensure that this points to your local Nitro dev node running in `--dev` mode.

Once you're the chain owner, you'll be able to access various Arbitrum-specific functions, such as:

- Managing the Sequencer
- Modifying chain parameters
- Accessing debugging features

This functionality is especially useful for development and testing purposes when using Nitro in `--dev` mode.

## Running Nitro dev node for Stylus testing

If your goal is to test Stylus contracts on Nitro in `--dev` mode, you can set up the environment in the same way, but with the added step of deploying the `Stylus Cache Manager`, which is necessary for Stylus-specific functionality.

To automate this process, you can use a bash script that both runs the Nitro dev node and deploys the `Stylus Cache Manager` contract automatically. Here's how you can do it:

### Step 1: Create a Bash script to automate the process

Create a new file called `run_nitro_with_cache_manager.sh` and add the following content:

```bash
#!/bin/bash

# Start Nitro Dev Node in the background
echo "Starting Nitro dev node..."
docker run --rm --name nitro-dev -p 8547:8547 offchainlabs/nitro-node:v3.2.1-d81324d --dev --http.addr 0.0.0.0 &

# Wait for the node to initialize
echo "Waiting for the Nitro node to initialize..."
sleep 15  # Adjust the sleep time if necessary based on node startup time

# Check if node is running
curl_output=$(curl -s -X POST -H "Content-Type: application/json" \
  --data '{"jsonrpc":"2.0","method":"net_version","params":[],"id":1}' \
  http://127.0.0.1:8547)

if [[ "$curl_output" == *"result"* ]]; then
  echo "Nitro node is running!"
else
  echo "Failed to start Nitro node."
  exit 1
fi

echo "Deploying Cache Manager contract..."
cast send --private-key 0xb6b15c8cb491557369f3c7d2c287b053eb229daa9c22138887752191c9520659 \
--rpc-url http://127.0.0.1:8547 \
--create 0x60a06040523060805234801561001457600080fd5b50608051611d1c61003060003960006105260152611d1c6000f3fe60806040526004361061011f5760003560e01c8063b187bd26116100a0578063c77ed13e11610064578063c77ed13e14610353578063cadb43e214610373578063d29b303e14610393578063e4940157146103b3578063e9c1bc0f146103c657600080fd5b8063b187bd261461027c578063b30906d4146102ad578063bae6c2ad146102f9578063c1c013c414610320578063c565a2081461033357600080fd5b806354fac919116100e757806354fac919146101de5780635c32e9431461021d5780635c975abb14610232578063674a64e014610247578063a8d6fe041461026757600080fd5b806317be85c31461012457806320f2f3451461014f5780632dd4f5661461017157806332052a9b146101915780633f4ba83a146101c9575b600080fd5b34801561013057600080fd5b506101396103e6565b6040516101469190611a2c565b60405180910390f35b34801561015b57600080fd5b5061016f61016a366004611ab3565b610473565b005b34801561017d57600080fd5b5061016f61018c366004611ae6565b6105f9565b34801561019d57600080fd5b506101b16101ac366004611b16565b6106d3565b6040516001600160c01b039091168152602001610146565b3480156101d557600080fd5b5061016f6106ee565b3480156101ea57600080fd5b5060035461020590600160801b90046001600160401b031681565b6040516001600160401b039091168152602001610146565b34801561022957600080fd5b5061016f6107aa565b34801561023e57600080fd5b5061016f610847565b34801561025357600080fd5b50600354610205906001600160401b031681565b34801561027357600080fd5b5061016f610909565b34801561028857600080fd5b5060035461029d90600160c01b900460ff1681565b6040519015158152602001610146565b3480156102b957600080fd5b506102cd6102c8366004611b33565b6109d4565b604080519384526001600160401b0390921660208401526001600160c01b031690820152606001610146565b34801561030557600080fd5b5060035461020590600160401b90046001600160401b031681565b61020561032e366004611ae6565b610a1d565b34801561033f57600080fd5b506101b161034e366004611b33565b610ab6565b34801561035f57600080fd5b5061016f61036e366004611ae6565b610ac4565b34801561037f57600080fd5b5061016f61038e366004611b33565b610ba3565b34801561039f57600080fd5b506101b16103ae366004611ae6565b610c7a565b61016f6103c1366004611b16565b610e5f565b3480156103d257600080fd5b506101396103e1366004611b33565b610ef0565b60606002805480602002602001604051908101604052809291908181526020016000905b8282101561046a5760008481526020908190206040805160608101825260028602909201805483526001908101546001600160401b03811684860152600160401b90046001600160c01b031691830191909152908352909201910161040a565b50505050905090565b600054610100900460ff1661048e5760005460ff1615610492565b303b155b6104fa5760405162461bcd60e51b815260206004820152602e60248201527f496e697469616c697a61626c653a20636f6e747261637420697320616c72656160448201526d191e481a5b9a5d1a585b1a5e995960921b60648201526084015b60405180910390fd5b600054610100900460ff1615801561051c576000805461ffff19166101011790555b6001600160a01b037f00000000000000000000000000000000000000000000000000000000000000001630036105a95760405162461bcd60e51b815260206004820152602c60248201527f46756e6374696f6e206d7573742062652063616c6c6564207468726f7567682060448201526b19195b1959d85d1958d85b1b60a21b60648201526084016104f1565b600380546001600160401b03848116600160801b0277ffffffffffffffff0000000000000000ffffffffffffffff199092169086161717905580156105f4576000805461ff00191690555b505050565b6040516304ddefed60e31b8152606b906326ef7f689061061d903390600401611b4c565b602060405180830381865afa15801561063a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061065e9190611b60565b61067d5733604051639531eff160e01b81526004016104f19190611b4c565b6003805467ffffffffffffffff19166001600160401b0383169081179091556040519081527fca22875e098f3b9c06ff3950c0cded621c968253a16623e890165451094c1839906020015b60405180910390a150565b60006106e8826001600160a01b03163f610ab6565b92915050565b6040516304ddefed60e31b8152606b906326ef7f6890610712903390600401611b4c565b602060405180830381865afa15801561072f573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107539190611b60565b6107725733604051639531eff160e01b81526004016104f19190611b4c565b6003805460ff60c01b191690556040517f7805862f689e2f13df9f062ff482ad3ad112aca9e0847911ed832e158c525b3390600090a1565b6040516304ddefed60e31b8152606b906326ef7f68906107ce903390600401611b4c565b602060405180830381865afa1580156107eb573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061080f9190611b60565b61082e5733604051639531eff160e01b81526004016104f19190611b4c565b610839600019610ba3565b610845600260006119f1565b565b6040516304ddefed60e31b8152606b906326ef7f689061086b903390600401611b4c565b602060405180830381865afa158015610888573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108ac9190611b60565b6108cb5733604051639531eff160e01b81526004016104f19190611b4c565b6003805460ff60c01b1916600160c01b1790556040517f6985a02210a168e66602d3235cb6
0x60806040526004361061004e5760003560e01c80633659cfe6146100655780634f1ef286146100855780635c60da1b146100985780638f283970146100c9578063f851a440146100e95761005d565b3661005d5761005b6100fe565b005b61005b6100fe565b34801561007157600080fd5b5061005b6100803660046106ed565b610118565b61005b610093366004610708565b61015f565b3480156100a457600080fd5b506100ad6101d0565b6040516001600160a01b03909116815260200160405180910390f35b3480156100d557600080fd5b5061005b6100e43660046106ed565b61020b565b3480156100f557600080fd5b506100ad610235565b61010661029b565b61011661011161033a565b610344565b565b610120610368565b6001600160a01b0316336001600160a01b03161415610157576101548160405180602001604052806000815250600061039b565b50565b6101546100fe565b610167610368565b6001600160a01b0316336001600160a01b031614156101c8576101c38383838080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152506001925061039b915050565b505050565b6101c36100fe565b60006101da610368565b6001600160a01b0316336001600160a01b03161415610200576101fb61033a565b905090565b6102086100fe565b90565b610213610368565b6001600160a01b0316336001600160a01b0316141561015757610154816103c6565b600061023f610368565b6001600160a01b0316336001600160a01b03161415610200576101fb610368565b606061028583836040518060600160405280602781526020016108076027913961041a565b9392505050565b6001600160a01b03163b151590565b6102a3610368565b6001600160a01b0316336001600160a01b031614156101165760405162461bcd60e51b815260206004820152604260248201527f5472616e73706172656e745570677261646561626c6550726f78793a2061646d60448201527f696e2063616e6e6f742066616c6c6261636b20746f2070726f78792074617267606482015261195d60f21b608482015260a4015b60405180910390fd5b60006101fb6104f5565b3660008037600080366000845af43d6000803e808015610363573d6000f35b3d6000fd5b60007fb53127684a568b3173ae13b9f8a6016e243e63b6e8ee1178d6a717850b5d61035b546001600160a01b0316919050565b6103a48361051d565b6000825111806103b15750805b156101c3576103"

# Keep the Nitro node running
echo "Cache Manager deployed. Nitro node is running..."
wait  # Keep the script alive and the node running
```

### Step 2: Make the script executable

After creating the file, make the script executable by running the following command:

```bash
chmod +x run_nitro_with_cache_manager.sh
```

### Step 3: Run the script

To run the script and start the Nitro `dev` node along with deploying the `Cache Manager`, use the following command:

```bash
./run_nitro_with_cache_manager.sh
```

This script will:

- Start the Nitro `dev` node in the background using Docker.
- Wait for the node to initialize.
- Deploy the `Cache Manager` contarct using the bytecode provided.
- Keep the node running for further interactions.

At the end of the process, you'll have the Nitro `dev` mode running with the Stylus `Cache Manager` deployed. You can now proceed to test and interact with your Stylus contracts in this environment, leveraging the deployed `Cache Manager` for added Stylus functionality.
